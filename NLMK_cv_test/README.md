Решение к тестовому заданию НЛМК CV
==============================

# Тестовое задание
Есть уже обученная onnx модель детектора вагонов (baseline).  
Параметры запуска:
- size 640x640
- BGR
- Добивка до квадрата серым pad_val = (114.0, 114.0, 114.0) # color of border

# Решение
Решение выполнено в виде готового docker контейнера с FastApi.  
Параметры запуска "захардкожены".  
В идеале надо их брать из окружения или транслировать в модель  

app/inference.py -- основной файл  
app/functions.py -- библиотека с функциями по преобразованию изображений

# Запуск

> docker build -f ./Docker/Dockerfile -t nlmk_wagons .  
> docker run -p 8080:8080 nlmk_wagons

или

> установить среду из pyproject.toml   
> uvicorn app.inference:app --host 0.0.0.0 --port 8080

# Использование
Через POST на http://0.0.0.0:8080/invocations  
принимает файл-картинку с разрещением .jpeg  

> curl --location --request POST 'http://0.0.0.0:8080/invocations' --form 'file=@"data/raw/6_2021-06-01_21-51-49_frame43.jpg"'  

На выходе отдает список вида 
> [
>    [
>       [0.0, 0.0, 0.0, 0.0, 0.0]
>    ]
> ]

или код 400
